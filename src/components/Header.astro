---
export interface Props {
showOverlay?: boolean;
immersive?: boolean;
enableTransition?: boolean;
}

const { showOverlay = false, immersive = false, enableTransition = false } = Astro.props;
---

<header id="site-header" class={`fixed top-0 left-0 w-full z-50 transition-all duration-300 px-4 py-3 ${immersive
    ? 'text-white' : 'text-[#2D3142] bg-white shadow-sm' }`}>
    <div class="flex items-center justify-between w-full max-w-7xl mx-auto">
        <!-- Logo and Tagline -->
        <div class="flex items-center gap-4">
            <a href={Astro.url.pathname==='/' ? '#top' : '/' } class="flex items-center gap-2">
                <img src="/elouaqid-logo.png" alt="Logo" class="h-10 w-auto object-contain" />
                <div>
                    <h1 class="text-lg sm:text-xl font-bold">Aziz El Ouaqid</h1>
                    <p class="text-xs sm:text-sm opacity-80">Technologist. Builder. Advisor.</p>
                </div>
            </a>

        </div>



        <!-- Desktop Nav -->
        <nav class="hidden sm:flex gap-6 text-sm font-medium ml-auto">

            <a href={Astro.url.pathname==='/' ? '#top' : '/Personal-Website/#top' }
                class="hover:text-yellow-600 transition">Home</a>
            <a href={Astro.url.pathname==='/' ? '#about' : '/Personal-Website/#about' }
                class="hover:text-yellow-600 transition">About</a>
            <a href={Astro.url.pathname==='/' ? '#founders' : '/Personal-Website/#founders' }
                class="hover:text-yellow-600 transition">Founders</a>
            <a href={Astro.url.pathname==='/' ? '#blog' : '/Personal-Website/#blog' }
                class="hover:text-yellow-600 transition">Blog</a>
            <a href={Astro.url.pathname==='/' ? '#mentoring' : '/Personal-Website/#mentoring' }
                class="hover:text-yellow-600 transition">Mentoring</a>
        </nav>

        <!-- Mobile Hamburger -->
        <button id="menu-toggle" class="sm:hidden text-3xl ml-auto focus:outline-none">â˜°</button>
    </div>

    <!-- Mobile Nav Menu -->
    <div id="mobile-menu"
        class="sm:hidden hidden flex flex-col gap-4 text-sm font-medium px-4 py-6 mt-2 bg-white/90 backdrop-blur-md text-[#2D3142] shadow-md rounded-lg">
        <a href={Astro.url.pathname==='/' ? '#top' : '/Personal-Website/#top' } class="block hover:text-yellow-600"
            onclick="document.getElementById('mobile-menu').classList.add('hidden')">Home</a>
        <a href={Astro.url.pathname==='/' ? '#about' : '/Personal-Website/#about' } class="block hover:text-yellow-600"
            onclick="document.getElementById('mobile-menu').classList.add('hidden')">About</a>
        <a href={Astro.url.pathname==='/' ? '#founders' : '/Personal-Website/#founders' }
            class="block hover:text-yellow-600"
            onclick="document.getElementById('mobile-menu').classList.add('hidden')">Founders</a>
        <a href={Astro.url.pathname==='/' ? '#blog' : '/Personal-Website/#blog' } class="block hover:text-yellow-600"
            onclick="document.getElementById('mobile-menu').classList.add('hidden')">Blog</a>
        <a href={Astro.url.pathname==='/' ? '#mentoring' : '/Personal-Website/#mentoring' }
            class="block hover:text-yellow-600"
            onclick="document.getElementById('mobile-menu').classList.add('hidden')">Mentoring</a>
    </div>


    <script is:inline>
        document.addEventListener('DOMContentLoaded', () => {
            const header = document.getElementById('site-header');
            const observer = new IntersectionObserver(
                ([entry]) => {
                    if (!entry.isIntersecting) {
                        header.classList.add('backdrop-blur-md', 'bg-white/10');
                        header.classList.remove('text-white');
                    } else {
                        header.classList.remove('backdrop-blur-md', 'bg-white/10');
                        header.classList.add('text-white');
                    }
                },
                { threshold: 0.1 }
            );

            const hero = document.getElementById('top');
            if (hero) observer.observe(hero);

            const toggle = document.getElementById('menu-toggle');
            const menu = document.getElementById('mobile-menu');
            toggle?.addEventListener('click', () => {
                menu.classList.toggle('hidden');
            });
        });
    </script>

</header>